name: expect
version: 5.45.4
release: 1
url: https://prdownloads.sourceforge.net/expect/expect5.45.4.tar.gz
homepage: https://core.tcl.tk/expect/
license: Public-Domain
summary: Expect is a tool for automating and testing interactive applications
description: |
  Expect is a tool for automating interactive applications such as telnet, ftp, passwd, fsck, rlogin, tip, etc. Expect is also useful for testing these same applications.
phase: 4
order: 75
critical: true
#builddeps: [make, glibc, tcl]
buildsteps: "PTYOUT=$(python3 -c 'from pty import spawn; spawn([\"echo\", \"ok\"])')\nif [ \"$PTYOUT\" != \"$(echo -ne 'ok\\r\\n')\" ]\nthen\n    echo $PTYOUT\n    exit 1\nfi\n\npatch -Np1 -i ../patches/expect-5.45.4-gcc14-1.patch\n\n./configure --prefix=/usr           \\\n            --with-tcl=/usr/lib     \\\n            --enable-shared         \\\n            --disable-rpath         \\\n            --mandir=/usr/share/man \\\n            --with-tclinclude=/usr/include\nmake\n\nif [ \"$RUN_TESTS\" = \"1\" ]; then\n    set +e\n    make test \n    set -e\nfi\n\nmake install\n\nln -sf expect5.45.4/libexpect5.45.4.so /usr/lib\n"
builddeps: []
